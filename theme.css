/* theme.css - Fixed Light Mode (No Flash) */

/* =========================================
   1. LIGHT MODE VARIABLES
   ========================================= */
/* CHANGED: using :root.light-mode ensures variables load instantly */
:root.light-mode {
    /* Backgrounds */
    --primary: #f8fafc;        /* Main background */
    --secondary: #e2e8f0;      /* Secondary background */
    --card-bg: #ffffff;        /* White cards */
    --header-bg: rgba(255, 255, 255, 0.95); /* Glassmorphism header */
    
    /* Text Colors */
    --text: #1e293b;           /* Dark Slate for headings */
    --text-light: #64748b;     /* Muted Grey for subtitles */
    
    /* Accents */
    --accent: #059669;          
    --accent-dark: #047857;
    
    /* Helpers */
    --border-color: #e2e8f0;   
    --input-bg: #f1f5f9;       
    --item-bg: #f1f5f9;        /* Distinct background for list items */
}

/* =========================================
   2. GLOBAL BODY OVERRIDES
   ========================================= */
/* CHANGED: Target via html.light-mode to prevent flash */
html.light-mode body {
    background: linear-gradient(135deg, #f0fdf4 0%, #f8fafc 100%) !important;
    color: var(--text); /* Ensure text color updates immediately */
}

/* =========================================
   3. SIDEBAR & NAVIGATION (FIXED BACKDROPS)
   ========================================= */
html.light-mode .sidebar {
    background: #ffffff;
    border-right: 1px solid var(--border-color);
    box-shadow: 4px 0 20px rgba(0, 0, 0, 0.05);
}

/* Sidebar Profile Area */
html.light-mode .sidebar-profile {
    background: linear-gradient(180deg, #f8fafc 0%, #ffffff 100%);
    border-bottom: 1px solid var(--border-color);
}
html.light-mode .profile-title {
    color: var(--text-light);
}
html.light-mode .profile-name {
    /* Optional: Ensure profile name stands out in light mode */
    text-shadow: none; 
}

/* Sidebar Menu Section Headers */
html.light-mode .menu-section h3 {
    color: var(--accent);
}

/* --- MENU ITEMS WITH BACKDROP --- */
html.light-mode .menu-item {
    background: var(--item-bg); /* Light Grey Backdrop */
    color: var(--text);
    border: 1px solid transparent; 
    box-shadow: 0 1px 2px rgba(0,0,0,0.03); /* Subtle shadow for depth */
}

/* Links inside menu items */
html.light-mode .menu-item a,
html.light-mode a.menu-item {
    color: var(--text);
}

/* Icons inside menu items */
html.light-mode .menu-item i {
    color: var(--accent);
}

/* Hover State */
html.light-mode .menu-item:hover {
    background: #e2e8f0; /* Darker grey on hover */
    border-color: var(--border-color);
    transform: translateX(3px);
}
html.light-mode .menu-item:hover a {
    color: var(--text);
}

/* Sidebar Footer (Fixed Backdrop) */
html.light-mode .sidebar-footer {
    background: #f8fafc; /* Light grey block */
    border-top: 1px solid var(--border-color);
}
html.light-mode .sidebar-footer p {
    color: var(--text-light);
}

/* Hamburger & Back Buttons */
html.light-mode .hamburger-btn,
html.light-mode .back-btn {
    background: #ffffff;
    border: 1px solid var(--border-color);
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
html.light-mode .hamburger-btn span {
    background: var(--accent);
}

/* Sticky Header */
html.light-mode .sticky-header {
    border-bottom: 1px solid var(--border-color);
    background: rgba(255, 255, 255, 0.95);
}
html.light-mode .header-title {
    color: var(--text);
}

/* =========================================
   4. CARDS, INPUTS & CONTENT
   ========================================= */
html.light-mode .card,
html.light-mode .test-card {
    border: 1px solid var(--border-color);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    background: var(--card-bg);
}

html.light-mode .card-header,
html.light-mode .test-card-header {
    background: linear-gradient(to right, #f8fafc, #ffffff);
    border-bottom: 1px solid var(--border-color);
}

/* Popups */
html.light-mode .popup,
html.light-mode .welcome-popup,
html.light-mode .prayer-popup {
    background: #ffffff;
    border: 1px solid var(--border-color);
    box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
}

/* Inputs */
html.light-mode input,
html.light-mode textarea,
html.light-mode .name-input,
html.light-mode .word-input,
html.light-mode .situation-input {
    background: var(--item-bg); /* Matches menu items */
    color: var(--text);
    border: 1px solid var(--border-color);
}
html.light-mode input::placeholder,
html.light-mode textarea::placeholder {
    color: #94a3b8;
}

/* Buttons */
html.light-mode .btn-secondary,
html.light-mode .nav-btn {
    background: #ffffff;
    color: var(--text);
    border: 1px solid var(--border-color);
    box-shadow: 0 1px 2px rgba(0,0,0,0.05);
}
html.light-mode .btn-secondary:hover,
html.light-mode .nav-btn:hover {
    background: #f1f5f9;
    border-color: var(--accent);
}

/* Option Selection Items */
html.light-mode .option-item,
html.light-mode .situation-item {
    background: #ffffff;
    border: 1px solid var(--border-color);
}
html.light-mode .option-item:hover {
    background: #f8fafc;
}
html.light-mode .option-item.selected {
    background: rgba(16, 185, 129, 0.1);
    border-color: var(--accent);
}

/* Results & Stats */
html.light-mode .results-summary {
    background: #ffffff;
    border: 1px solid var(--border-color);
}
html.light-mode .result-card {
    background: var(--item-bg);
    border: 1px solid var(--border-color);
}
html.light-mode .progress-container,
html.light-mode .meter-bar {
    background: #e2e8f0;
}

/* Subtitles/Text */
html.light-mode .page-subtitle, 
html.light-mode .instruction-text,
html.light-mode .completion-subtitle,
html.light-mode .no-images-test,
html.light-mode .no-situations-test,
html.light-mode .no-images-message,
html.light-mode .no-situations-message,
html.light-mode .card-body p {
    color: var(--text-light);
    opacity: 1;
}

/* =========================================
   5. TOGGLE BUTTON (TOP LEFT SIDEBAR)
   ========================================= */
.sidebar-profile {
    position: relative; 
}

.theme-btn-animated {
    position: absolute;
    top: 15px;
    left: 15px; /* Positioned at Top-Left */
    
    width: 35px;
    height: 35px;
    border-radius: 50%;
    
    /* Default Dark Mode Look */
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(16, 185, 129, 0.3);
    color: var(--accent);
    
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 20;
    transition: all 0.3s ease;
    overflow: hidden;
}

.theme-btn-animated:hover {
    transform: scale(1.1);
    background: rgba(16, 185, 129, 0.15);
}

/* Light Mode Button Style */
html.light-mode .theme-btn-animated {
    background: #fff7ed;
    border-color: #fcd34d;
    color: #f59e0b;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

/* Icon Animation */
.icon-rotate {
    animation: spin-icon 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

@keyframes spin-icon {
    0% { transform: rotate(-180deg) scale(0.5); opacity: 0; }
    50% { transform: scale(1.2); }
    100% { transform: rotate(0deg) scale(1); opacity: 1; }
}
